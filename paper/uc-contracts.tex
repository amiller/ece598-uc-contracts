\documentclass[11pt]{article}
\usepackage[dvipsnames]{xcolor}
\usepackage{fancyhdr}
\usepackage{url}
\usepackage[most]{tcolorbox}
\usepackage{multirow}

\usetikzlibrary{matrix, arrows.meta, calc, positioning}
\tikzset{myarrow/.style={-Latex, rounded corners},}

\definecolor{vert}{RGB}{0,181,0}
\definecolor{oran}{RGB}{223,74,0}
\definecolor{viol}{RGB}{134,0,175}
\definecolor{roug}{RGB}{215,15,0}
\definecolor{bb}{RGB}{0,0,0}

\newtcolorbox[auto counter]{bbox}[2][]{%
    colback=white,
    colframe=bb,
    colbacktitle=white!90!roug,
    coltitle=black,
    fonttitle=\bfseries, 
    enhanced,
    attach boxed title to top left={yshift=-2mm, xshift=0.5cm},%
    #1% For possible options
}
\topmargin=-5mm
\evensidemargin=0cm
\oddsidemargin=0cm
\textwidth=16cm
\textheight=22cm
\addtolength{\headheight}{1.6pt}
\newcommand{\cancel}[1]{}
\newcommand{\mymark}{$^*$}
\setlength\parindent{24pt}

\newcommand{\lastupdate}{August 2015}

\lhead{\sc IACR Policy for Cryptology Schools}
\rhead{\sc \lastupdate}

\title{\bf IACR Policy for Cryptology Schools}
\author{\mbox{}}

\date{\lastupdate
 \footnote{The most recent version of this document
    can be obtained from \protect\url{http://www.iacr.org/docs/}.\newline
  Editors of this document: M. Abdalla, A. Boldyreva, C. Cachin, A. Kiayias, B. Warinschi (2014).}}

\input{macros}

\begin{document}

\pagestyle{fancy}
\pagenumbering{arabic}

\maketitle

\section{Related Works}
\input{sections/relatedworks}

\begin{figure}[!ht]
	\input{figures/exec_tx}
	\label{fig:functionality:exectx}
\end{figure}

\begin{figure}[!ht]
\input{figures/exec_contract_create}
\label{fig:functionality:execcreate}
\end{figure}

\begin{figure}[!ht]
\input{figures/g_ledger}
	\caption{Ideal functionality representing a basic ledger with adversarial methods for delaying/reordering transactions and smart contract support}
	\label{fig:functionality:ledger}
\end{figure}

\begin{figure}
	\input{figures/protected_wrapper}
	\caption{Protection wrapper for the ledger to maintain indistinguishability.}
\end{figure}

\begin{figure}
	\input{figures/u_pay}
	\caption{Update function for a payment channel. Given as a parameter to \Fstate. It defines the format of the \msf{state} and its updates.}
\end{figure}

\begin{figure}
	\input{figures/contract_pay}
	\caption{Contract pay}
\end{figure}

\begin{figure}
	\input{figures/p_pay}
	\caption{Local protocol for parties to follow for a payment channel between two parties. Parties can pay, deposit into, or withdraw from the channel.}
\end{figure}

\begin{figure}
	\input{figures/f_state}
	\caption{The ideal functionality \Fstate. The functionality proceeds in rounds and waits for parties to provide input. When all parties have provided input or the round deadline has passed, a state update is executed. Contract output is given to \Gledger in the form of a transaction. Parties must explicitly \msf{ping} the functionality in order to make progress. }
\end{figure}

\begin{figure}
	\input{figures/f_pay}
	\caption{The payment channel functionality. Unlike $\Fstate$, doesn't need any notion of rounds until it must deal with on-chain transactions for deposits. Buffering for $O(\Delta)$ rounds implies the adversary can choose the number.}
\end{figure}

\begin{figure}
	\input{figures/wrapper}
	\caption{The wrapper $\mathcal{W}$ that provides common function for all functionalities. In $\Fstate$ for example, the wrapper enables functionalities to buffer sending output to the parties in the protocol. When the wrapper sends a message to its functionality $\F$, it does not constitute an \msf{ITM} to \msf{ITM} write as they are both running on the same \msf{ITM}.}
\end{figure}

%\begin{bbox}[title=asd]
%hello
%\end{bbox}


\bibliographystyle{plain}
\emergencystretch 1.5em
\bibliography{bibuccontracts}


\end{document}
