\begin{bbox}[title={\textbf{Functionality} $\F_{\msf{clock}} (\mathcal{P})$}]

Intialize $\forall p_i \in \mathcal{P}: d_i := 0$

\vspace{2mm} \hrule \vspace{2mm}

-- \OnInput \inmsg{RoundOK} from \Partyi:

	\dquad $d_i = 1$

	\dquad \If $\forall p_i \in \mathcal{P}: d_i = 1$:

	\dquad \quad $d_i := 0$ for all $p_i \in \mathcal{P}$

	\dquad \Leak $(\msf{switch},\mathbf{P_i}) \rightarrow \mathcal{A}$

-- \OnInput \inmsg{RequestRound} from \Partyi: 

	\dquad \Send $d_i \rightarrow \mathbf{P_i}$

-- \OnInput \inmsg{corrupt}{$p_i$} from $\mathcal{A}$:

	\dquad Set $\mathcal{H} := \mathcal{H} \cup \{p_i\}$

\end{bbox}

